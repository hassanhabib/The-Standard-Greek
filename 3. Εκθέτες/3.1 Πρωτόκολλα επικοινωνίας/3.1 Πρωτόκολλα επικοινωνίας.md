# 3.1 Communication Protocols

## 3.1.0 Εισαγωγή

Στο χώρο της έκθεσης, μία από τις πιο κοινές μεθοδολογίες για την οικοδόμηση μιας δομής επικοινωνίας μεταξύ πολλών συστημάτων είναι η χρήση πρωτοκόλλου επικοινωνίας. Αυτά τα πρωτόκολλα έχουν εξελιχθεί με τα χρόνια από το SOAP σε REST σε πολλά άλλα πρωτόκολλα επικοινωνίας και αρχές που δημιούργησαν τις δικές τους τεχνολογίες για την έκθεση API σε κατανεμημένα συστήματα.

Στον κόσμο του .NET, η τεχνολογία έχει εξελιχθεί με την εξέλιξη της αρχιτεκτονικής από το SOA με το WCF στο Microservices με REST. Η εξέλιξη συνεχίζεται, αλλά οι αρχές αλλάζουν λιγότερο συχνά. Στα επόμενα κεφάλαια, θα συζητήσουμε τα πιο κοινά πρωτόκολλα επικοινωνίας με έναν τυποποιημένο τρόπο για να τα εφαρμόσουμε σε εφαρμογές επιπέδου επιχείρησης.

### 3.1.0.0 Αρχές & Κανόνες
Τα πρωτόκολλα επικοινωνίας απαιτούνται για να επιτύχουν δύο πράγματα όταν ενσωματώνονται με τη βασική επιχειρηματική λογική. Την επικοινωνία αποτελεσμάτων και την αναφορά σφαλμάτων. Ας μιλήσουμε για αυτά σύντομα:

#### 3.1.0.0.0 Επικοινωνία Αποτελεσμάτων
Οποιοδήποτε πρωτόκολλο επικοινωνίας πρέπει να ικανοποιεί την αρχή της επιστροφής ενός αποτελέσματος βασικής επιχειρηματικής λογικής. Αυτό το αποτέλεσμα μπορεί να σειροποιημένο σε κάποια ενοποιημένη γλώσσα όπως το JSON ή να κοινοποιηθεί ως έχει. Στην περίπτωση βιβλιοθηκών API, συνήθως δεν υπάρχει ανάγκη για σειροποίηση και αποσύνδεση δεδομένων. Αλλά αυτό έρχεται με τον περιορισμό ότι μόνο οι τεχνολογίες που ενσωματώνονται με αυτές τις βιβλιοθήκες μπορούν να επωφεληθούν από αυτήν.

Η επικοινωνία αποτελεσμάτων μπορεί επίσης να περικλείεται με κάποιο είδος κατάστασης. Στην περίπτωση των επικοινωνιών RESTful API, ένας κωδικός 200 μπορεί να συνοδεύει το επιστρεφόμενο σειροποιημένο JSON αποτέλεσμα. Αυτοί οι κωδικοί επιτρέπουν στους καταναλωτές να κατανοήσουν την επόμενη πορεία δράσης. Ορισμένα αποτελέσματα 2xx ενδέχεται να απαιτούν καθυστερημένη ενέργεια εάν η απάντηση είναι απλώς «Αποδεκτή» αλλά όχι απαραίτητα «Δημιουργήθηκε».

#### 3.1.0.0.1 Αναφορές Σφαλμάτων
Η βασική επιχειρηματική λογική θα πρέπει να παρέχει λεπτομερή αναφορά όλων των σφαλμάτων επικύρωσης σε μια συγκεκριμένη αίτηση. Η ευθύνη των πρωτοκόλλων επικοινωνίας είναι να εκπροσωπούν αυτές τις αναφορές σφαλμάτων στην αρχική τους μορφή ή να σειροποιήσουν την αναφορά σε μια γλώσσα που μπορεί να αποσυνδεθεί εύκολα και να μετατραπεί ξανά στην αρχική μορφή της Exception στην πλευρά του πελάτη.

Οι σειροποιημένες αναφορές σφαλμάτων θα πρέπει επίσης να έχουν τους δικούς τους κωδικούς, ώστε ο πελάτης να γνωρίζει την επόμενη πορεία δράσης. Συνιστούμε να ακολουθείτε έναν τυποποιημένο τρόπο επικοινωνίας σφαλμάτων με τεκμηρίωση, κατά προτίμηση για να βοηθήσετε τους καταναλωτές να αναπτύξουν τους καλύτερους πελάτες για αυτές τις API.

### 3.1.0.1 Κοινοί τύποι
Ας εξερευνήσουμε μερικούς από τους πιο κοινούς τύπους πρωτοκόλλων επικοινωνίας σε αυτή την ενότητα.

#### 3.1.0.1.0 REST
Το REST είναι ένα πρωτόκολλο Representational state transfer με ορισμένους περιορισμούς που ορίζουν ρητά τη μορφή επικοινωνίας, την αναφορά σφαλμάτων και τη μη stateful φύση του. Κατά την συγγραφή αυτού του Προτύπου, τα RESTful APIs ήταν η πιο κοινή μορφή επικοινωνίας μεταξύ κατανεμημένων συστημάτων. Τα RESTful APIs είναι ανεξάρτητα από την τεχνολογία. Οποιαδήποτε τεχνολογία ή γλώσσα προγραμματισμού μπορεί να τα εφαρμόσει και επιτρέπουν σε αυτές τις τεχνολογίες να επικοινωνούν μεταξύ τους χωρίς κατάσταση, χωρίς καμία σκληρή εξάρτηση από την επιλογή τεχνολογίας του server ή του client.

#### 3.1.0.1.1 Βιβλιοθήκες
Το άλλο πιο κοινό πρωτόκολλο επικοινωνίας είναι τα APIs που υλοποιούνται εντός βιβλιοθηκών. Για παράδειγμα, τα πακέτα NuGet είναι δημοσιευμένες και διανεμητές βιβλιοθήκες που επιτρέπουν στους προγραμματιστές να αξιοποιήσουν μια τοπική λογική βασικής επιχειρηματικής ή να επικοινωνήσουν με μια εξωτερική πηγή για να επιτύχουν έναν συγκεκριμένο στόχο.

#### 3.1.0.1.2 Άλλοι τύποι
Υπάρχουν αρκετοί άλλοι τύποι πρωτοκόλλων επικοινωνίας. Μερικοί είναι παλαιότεροι και άλλοι πρόκειται να παρουσιαστούν στη βιομηχανία λογισμικού. Αυτοί οι τύποι είναι όπως το SOAP με εκδηλώσεις όπως το WCF, το gRPC, το GraphQL και πολλά άλλα πρωτόκολλα.

Θα επικεντρωθούμε κυρίως στα RESTful APIs ως πιο κοινό πρωτόκολλο επικοινωνίας με μια σύντομη αναφορά στις Βιβλιοθήκες. Και καθώς εξελισσόμαστε και μαθαίνουμε περαιτέρω, έτσι και το Πρότυπό μας, το οποίο θα περιλαμβάνει όλο και περισσότερα διαφορετικά πρωτόκολλα επικοινωνίας και θα αναπτυχθεί και από άποψη μοτίβων.

Ας ξεκινήσουμε με τα RESTful APIs ως πρωτόκολλο επικοινωνίας και ας εμβαθύνουμε στις διάφορες πτυχές αυτού του εξοθέτη component.